intents:
  WhereAreWeIntent:
    speech:
      type: plaintext
      text: >
        {%- if is_state('device_tracker.iphwn666', 'home') and
               is_state('device_tracker.megs_iphone', 'home') -%}
          You are both home.
        {%- else -%}
          Megs is at {{ states("device_tracker.megs_iphone") }} and
          Rick is at {{ states("device_tracker.iphwn666") }}
        {% endif %}

  LocateIntent:
    action:
      service: notify.ios_iphwn666
      data_template:
        message: The location of {{ User }} has been queried via Alexa.
    speech:
      type: plaintext
      text: >
        {%- for state in states.device_tracker -%}
          {%- if state.name.lower() == User.lower() -%}
            {{ state.name }} is at {{ state.state }}
          {%- endif -%}
        {%- else -%}
          I am sorry. I do not know where {{User}} is.
        {%- endfor -%}
    card:
      type: simple
      title: Location
      content: Location Update via Home Assistant

  ActivateSceneIntent:
    action:
      service: scene.turn_on
      data_template:
        entity_id: scene.{{ Scene | replace(" ", "_") }}
    speech:
      type: plaintext
      text: !include alexa_confirm.yaml
    card:
      type: simple
      title: Scene Activation
      content: Scene Activated via Home Assistant

  RunScriptIntent:
    action:
      service: script.turn_on
      data_template:
        entity_id: script.{{ Script | replace(" ", "_") }}
    speech:
      type: plaintext
      text: !include alexa_confirm.yaml
    card:
      type: simple
      title: Script Activation
      content: Script Activated via Home Assistant

  HowIsTheTrafficIntent:
    speech:
      type: plaintext
      text: >
        The fastest route to Ricks office is about {{ states("sensor.rick_work_commute") }} minutes and Megans commute to Great Hearts is {{ states("sensor.megs_work_commute") }}
    card:
      type: simple
      title: Commute
      content: Commute Times via Home Assistant



#  ETARickIntent:
#    speech:
#      type: plaintext
#      text: >
#        {%- if is_state('input_select.Rick_status', 'driving') -%}
#          Rick is in the car and his estimated arrival time is {{states("sensor.eta_Rick")}}.
#        {%- else -%}
#          Rick is not in the car. 
#        {% endif %}